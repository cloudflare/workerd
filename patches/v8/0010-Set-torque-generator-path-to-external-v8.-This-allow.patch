From 262a9fafc8c69e3842715fcc9c5029be1bc1171b Mon Sep 17 00:00:00 2001
From: Garrett Gu <garrett@cloudflare.com>
Date: Wed, 10 Apr 2024 14:31:33 -0500
Subject: Set torque generator path to external/v8. This allows bazel to find
 the generated torque outputs even though we are building from a different
 workspace.

See https://chromium-review.googlesource.com/c/v8/v8/+/5339896

diff --git a/bazel/defs.bzl b/bazel/defs.bzl
index 1a6afe57fa386afe3900e4a3a165426f14b1f8a4..55384199d235d28fba18eac4a6c0c51e1e7675a4 100644
--- a/bazel/defs.bzl
+++ b/bazel/defs.bzl
@@ -353,7 +353,7 @@ def get_cfg():
 # split the set of outputs by using OutputGroupInfo, that way we do not need to
 # run the torque generator twice.
 def _torque_files_impl(ctx):
-    v8root = "."
+    v8root = "external/v8"
 
     # Arguments
     args = []
