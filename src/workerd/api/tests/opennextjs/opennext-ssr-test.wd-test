using Workerd = import "/workerd/workerd.capnp";

const unitTests :Workerd.Config = (
  services = [
    ( name = "opennext-ssr-test",
      worker = (
        modules = [
          (name = "worker", esModule = embed "opennext-ssr-test.js"),
          (name = "opennext-ssr-worker", esModule = embed "opennext-ssr-worker.js"),
        ],
        compatibilityFlags = [
          "experimental",
          "nodejs_compat_v2",
          "enable_nodejs_fs_module",
          "enable_nodejs_os_module",
          "enable_nodejs_vm_module",
          "enable_nodejs_http_modules",
          "streams_enable_constructors",
          "transformstream_enable_standard_constructor",
        ],
      )
    ),
  ],
);
