using Workerd = import "/workerd/workerd.capnp";

const unitTests :Workerd.Config = (
  services = [
    ( name = "url-test-test",
      worker = (
        modules = [
          (name = "worker", esModule = embed "url-test.js"),
          (name = "harness",
           esModule = embed "../../../../../workerd/src/wpt/harness.js"),
          (name = "url-origin.any.js",
           esModule = embed "../../../../../wpt/url/url-origin.any.js"),
          (name = "resources/urltestdata.json",
           json = embed "../../../../../wpt/url/resources/urltestdata.json"),
          (name = "resources/urltestdata-javascript-only.json",
           json = embed "../../../../../wpt/url/resources/urltestdata-javascript-only.json"),
        ],
        bindings = [
          (name = "wpt", service = "wpt"),
        ],
        compatibilityDate = "2024-07-01",
        compatibilityFlags = ["nodejs_compat_v2"],
      )
    ),
    (
      name = "wpt",
      disk = ".",
    )
  ],
);
