using Workerd = import "/workerd/workerd.capnp";

const unitTests :Workerd.Config = (
  services = [
    ( name = "module-imports-test",
      worker = (
        modules = [
          (name = "worker", esModule = embed "module-imports-test.js"),
          (name = "node:crypto",
           esModule = "export const test = await import('node-internal:internal_buffer');"),
          (name = "node:buffer",
           esModule = "import * as buf from 'node-internal:internal_buffer'; export default buf;"),
          (name = "wasm", wasm = embed "test.wasm"),
        ],
        compatibilityDate = "2025-07-01",
        compatibilityFlags = [
          "nodejs_compat",
        ]
      )
    ),
  ],
);
