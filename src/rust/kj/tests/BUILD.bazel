load("//:build/kj_test.bzl", "kj_test")
load("//:build/wd_rust_crate.bzl", "wd_rust_crate")

wd_rust_crate(
    name = "tests",
    cxx_bridge_deps = [
        "//src/rust/kj:ffi",
    ],
    cxx_bridge_src = "lib.rs",
    proc_macro_deps = [
        "@crates_vendor//:async-trait",
    ],
    deps = [
        "//src/rust/kj",
    ],
)

kj_test(
    src = "ffi-test.c++",
    deps = [
        ":tests",
        "//src/rust/kj",
    ],
)
